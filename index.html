<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ron's Fragrance of the Day</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.5.0/dist/full.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body class="min-h-screen bg-base-200 text-base-content flex items-center justify-center px-4">
  <div class="w-full max-w-lg bg-base-100 rounded-xl shadow-xl p-6 space-y-6">
    <h1 class="text-2xl font-bold text-center text-primary">Fragrance of the Day</h1>
    <p>Overengineering a solution to a decision fatigue problem...</p>

    <div class="space-y-4">
      <div class="form-control">
        <label class="label" for="season">
          <span class="label-text font-medium"><i class="fas fa-calendar-alt mr-2"></i>Select Season</span>
        </label>
        <select id="season" class="select select-bordered">
          <option value="Spring/Summer">Spring/Summer</option>
          <option value="Fall/Winter">Fall/Winter</option>
          <option value="All Seasons">All Seasons</option>
        </select>
      </div>

      <div class="form-control">
        <label class="label" for="occasion">
          <span class="label-text font-medium"><i class="fas fa-user-tie mr-2"></i>Select Occasion</span>
        </label>
        <select id="occasion" class="select select-bordered">
          <option value="Work">Work</option>
          <option value="Going Out/Date">Going Out/Date</option>
          <option value="Crowded Spaces">Crowded Spaces</option>
          <option value="Casual Outdoor">Casual Outdoor</option>
        </select>
      </div>

      <button id="pickBtn" class="btn btn-primary w-full"><i class="fas fa-spray-can mr-2"></i>Pick Fragrance</button>
    </div>

    <div id="loading" class="flex justify-center hidden">
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>

    <div id="result" class="text-xl font-semibold text-primary text-center min-h-[40px]"></div>

    <div class="collapse collapse-arrow border border-base-300 rounded-box">
      <input type="checkbox" class="peer">
      <div class="collapse-title font-medium">Previous Selections</div>
      <div class="collapse-content">
        <ul id="history-list" class="text-sm space-y-2 max-h-40 overflow-y-auto"></ul>
        <button id="clearHistoryBtn" class="btn btn-sm btn-ghost mt-3">Clear history</button>
      </div>
    </div>

    <footer class="text-center text-sm text-base-content/60 pt-4 border-t border-base-300">
      Personal Fragrance Selector © <span id="current-year"></span>
    </footer>
  </div>

  <script>
    const fragrances = [
      { name: "A Grove by the Sea", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Rouge Smoking (Extrait)", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "The One Luminous Night", season: "Fall/Winter", occasion: "Work" },
      { name: "Poudrextase", season: "Spring/Summer", occasion: "Work" },
      { name: "Apricot in Cognac", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Kasbah", season: "Fall/Winter", occasion: "Work" },
      { name: "Casablanca", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Quercus", season: "Spring/Summer", occasion: "Work" },
      { name: "Eau de Magnolia", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Barcelona", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Crush Balls", season: "Spring/Summer", occasion: "Going Out/Date" },
      { name: "Notturno", season: "Fall/Winter", occasion: "Work" },
      { name: "Russian Tea", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "The Architects Club", season: "All Seasons", occasion: "Crowded Spaces" },
      { name: "To My Father", season: "Fall/Winter", occasion: "Work" },
      { name: "Sydney Rock Pool", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Bois d'Ascèse", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Radio Bombay", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Dark Wave", season: "Fall/Winter", occasion: "Crowded Spaces" },
      { name: "Indigo Smoke", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Poets of Berlin", season: "Spring/Summer", occasion: "Work" },
      { name: "Morning Chess", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Do Not Disturb", season: "All Seasons", occasion: "Crowded Spaces" },
      { name: "Green Spell", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Nordic Noir", season: "All Seasons", occasion: "Crowded Spaces" },
      { name: "Say Yes", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Collection Grands Crus - Azur Riviera", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Collection Grands Crus - Oud Al Sahraa", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Collection Grands Crus - Hoja de Cuba", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Collection Grands Crus - Russkaya Кожа", season: "Fall/Winter", occasion: "Work" },
      { name: "Vetiverissimo", season: "Spring/Summer", occasion: "Work" },
      { name: "Iris Cendré", season: "Spring/Summer", occasion: "Work" },
      { name: "Cologne du Maghreb (2021)", season: "All Seasons", occasion: "Casual Outdoor" },
      { name: "Unsettled", season: "All Seasons", occasion: "Crowded Spaces" },
      { name: "Ummagumma", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Silky Woods", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Delphi (Huile Parfum)", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Cashmeran in Cognac", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Overnight (Eau de Parfum)", season: "All Seasons", occasion: "Work" },
      { name: "Toji", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Pine in Acacia", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Ebony in Oak", season: "Fall/Winter", occasion: "Casual Outdoor" },
      { name: "Bohemian Lime", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Sexy Garrigue", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Gris Charnel (Eau de Parfum)", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Rouge Smoking (Eau de Parfum)", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Black Afgano (Extrait de Parfum)", season: "Fall/Winter", occasion: "Going Out/Date" },
      { name: "Ingenious Ginger", season: "Spring/Summer", occasion: "Casual Outdoor" },
      { name: "Assam of India", season: "Spring/Summer", occasion: "Casual Outdoor" }
    ];

    const pickBtn = document.getElementById('pickBtn');
    const resultEl = document.getElementById('result');
    const loadingEl = document.getElementById('loading');
    const historyEl = document.getElementById('history-list');
    const clearBtn = document.getElementById('clearHistoryBtn');

    document.getElementById('current-year').textContent = new Date().getFullYear();

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem('fragranceHistory')) || [];
      historyEl.innerHTML = '';
      if (history.length === 0) {
        historyEl.innerHTML = '<li class="text-base-content/60">No selections yet</li>';
        return;
      }
      history.forEach(h => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="font-medium">${h.fragrance}</span><br><span class="text-xs">${h.season} • ${h.occasion}</span>`;
        historyEl.appendChild(li);
      });
    }

    function pickFragrance() {
      const season = document.getElementById('season').value;
      const occasion = document.getElementById('occasion').value;
      loadingEl.classList.remove('hidden');
      resultEl.textContent = '';

      setTimeout(() => {
        const matches = fragrances.filter(f =>
          (f.season === season || f.season === 'All Seasons' || season === 'All Seasons') &&
          f.occasion === occasion
        );
        let text = 'No match found.';
        if (matches.length > 0) {
          const selected = matches[Math.floor(Math.random() * matches.length)];
          text = `Today's Fragrance: ${selected.name}`;
          const history = JSON.parse(localStorage.getItem('fragranceHistory')) || [];
          history.unshift({ fragrance: selected.name, season, occasion });
          if (history.length > 10) history.pop();
          localStorage.setItem('fragranceHistory', JSON.stringify(history));
          loadHistory();
        }
        resultEl.textContent = text;
        loadingEl.classList.add('hidden');
      }, 600);
    }

    pickBtn.addEventListener('click', pickFragrance);
    clearBtn.addEventListener('click', () => {
      localStorage.removeItem('fragranceHistory');
      loadHistory();
    });

    loadHistory();
  </script>
</body>
</html>
